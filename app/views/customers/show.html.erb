<div class="container mt-4">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h2>顧客詳細</h2>
    </div>
    <div class="card-body">
      <div class="mb-3">
        <strong>顧客コード:</strong> <%= @customer.customer_code %>
      </div>

      <div class="mb-3">
        <strong>社名（屋号）:</strong> <%= @customer.company_name %>
      </div>

      <div class="mb-3">
        <strong>郵便番号:</strong> <%= @customer.postal_code %>
      </div>

      <div class="mb-3">
        <strong>住所:</strong> <%= @customer.address %>
      </div>

      <div class="mb-3">
        <strong>部署名:</strong> <%= @customer.department %>
      </div>

      <div class="mb-3">
        <strong>担当者名:</strong> <%= @customer.contact_name %>
      </div>

      <div class="mb-3">
        <strong>電話番号:</strong> <%= @customer.phone_number %>
      </div>

      <div class="mb-3">
        <strong>請求書送付方法:</strong>
        <%= render 'shared/invoice_delivery_method_badge', customer: @customer %>
      </div>

      <div class="mb-3">
        <strong>請求締日:</strong> <%= @customer.billing_closing_day_display %>
      </div>

      <div class="mb-3">
        <strong>メールアドレス:</strong> <%= @customer.email %>
      </div>

      <div class="mb-3">
        <strong>パスワード設定状況:</strong>
        <% if @customer.password_set? %>
          <span class="badge bg-success">パスワード設定済み</span>
        <% else %>
          <span class="badge bg-warning">パスワード未設定</span>
        <% end %>
      </div>

      <h4 class="mt-4 mb-3">納品先一覧</h4>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>納品先名</th>
              <th>郵便番号</th>
              <th>住所</th>
              <th>電話番号</th>
              <th>担当者</th>
              <th>種別</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <% if @delivery_locations.present? %>
              <% @delivery_locations.each do |location| %>
                <tr>
                  <td><%= location.name %></td>
                  <td><%= location.postal_code %></td>
                  <td><%= location.address %></td>
                  <td><%= location.phone %></td>
                  <td><%= location.contact_person %></td>
                  <td>
                    <% if location.is_main_office? %>
                      <span class="badge bg-primary">本社</span>
                    <% else %>
                      <span class="badge bg-secondary">支店</span>
                    <% end %>
                  </td>
                  <td>
                    <%= link_to '編集', edit_delivery_location_path(location), class: 'btn btn-sm btn-info' %>
                    <% unless location.is_main_office? %>
                      <%= link_to '削除', delivery_location_path(location),
                          method: :delete,
                          data: { confirm: '本当に削除しますか？' },
                          class: 'btn btn-sm btn-danger' %>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="7" class="text-center">納品先が登録されていません</td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <div class="mt-3">
        <%= link_to '新規納品先追加', new_delivery_location_path(customer_id: @customer.id), class: 'btn btn-primary' %>
      </div>
    </div>
    <div class="card-footer">
  <%= render 'shared/show_action_buttons', edit_path: edit_customer_path(@customer), delete_path: customer_path(@customer), back_path: customers_path %>
</div>
  </div>
</div>