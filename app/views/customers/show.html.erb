<div class="container mt-4">
  <div class="card shadow mb-4">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">顧客詳細</h2>
    </div>
    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-3 fw-bold">顧客コード</div>
        <div class="col-md-9"><%= @customer.customer_code %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">社名（屋号）</div>
        <div class="col-md-9"><%= @customer.company_name %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">郵便番号</div>
        <div class="col-md-9"><%= @customer.postal_code %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">住所</div>
        <div class="col-md-9"><%= @customer.address %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">部署名</div>
        <div class="col-md-9"><%= @customer.department.present? ? @customer.department : '未設定' %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">担当者名</div>
        <div class="col-md-9"><%= @customer.contact_name.present? ? @customer.contact_name : '未設定' %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">電話番号</div>
        <div class="col-md-9"><%= @customer.phone_number.present? ? @customer.phone_number : '未設定' %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">FAX番号</div>
        <div class="col-md-9"><%= @customer.fax_number.present? ? @customer.fax_number : '未設定' %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">支払い方法</div>
        <div class="col-md-9"><%= @customer.payment_method&.name || '未設定' %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">請求書送付方法</div>
        <div class="col-md-9">
          <%= render 'shared/invoice_delivery_method_badge', customer: @customer %>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">請求締日</div>
        <div class="col-md-9"><%= @customer.billing_closing_day_display %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">メールアドレス</div>
        <div class="col-md-9"><%= @customer.email.present? ? @customer.email : '未設定' %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 fw-bold">パスワード設定状況</div>
        <div class="col-md-9">
          <% if @customer.password_set? %>
            <span class="badge bg-success">パスワード設定済み</span>
          <% else %>
            <span class="badge bg-warning">パスワード未設定</span>
          <% end %>
        </div>
      </div>

      <h4 class="mt-4 mb-3">納品先一覧</h4>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>納品先名</th>
              <th>郵便番号</th>
              <th>住所</th>
              <th>電話番号</th>
              <th>担当者</th>
              <th>種別</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <% if @delivery_locations.present? %>
              <% @delivery_locations.each do |location| %>
                <tr>
                  <td><%= location.name %></td>
                  <td><%= location.postal_code %></td>
                  <td><%= location.address %></td>
                  <td><%= location.phone %></td>
                  <td><%= location.contact_person %></td>
                  <td>
                    <% if location.is_main_office? %>
                      <span class="badge bg-primary">本社</span>
                    <% else %>
                      <span class="badge bg-secondary">支店</span>
                    <% end %>
                  </td>
                  <td>
                    <%= link_to '編集', edit_delivery_location_path(location), class: 'btn btn-sm btn-info' %>
                    <% unless location.is_main_office? %>
                      <%= link_to '削除', delivery_location_path(location),
                          method: :delete,
                          data: { confirm: '本当に削除しますか？' },
                          class: 'btn btn-sm btn-danger' %>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="7" class="text-center">納品先が登録されていません</td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <div class="mt-3">
        <%= link_to '新規納品先追加', new_delivery_location_path(customer_id: @customer.id), class: 'btn btn-primary' %>
      </div>
    </div>
    <div class="card-footer">
  <%= render 'shared/show_action_buttons', edit_path: edit_customer_path(@customer), delete_path: customer_path(@customer), back_path: customers_path %>
</div>
  </div>
</div>